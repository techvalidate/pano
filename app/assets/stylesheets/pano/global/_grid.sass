// =========================================================
// Grid System
//
// Put all columns in a .grid element (unless they're
// just table cells, then the .grid element is unnecessary).
// By default, grids don't have outer gutters. If you want
// outer gutters, apply .outer-gutters to your grid.
//
// Columns: .col-1...col-12 to make columns 1-12 units wide.
//
// =========================================================

// =========================================================
// functions and mixins for defining grids
// =========================================================

$totalColumns: 12

@function columnRatio($columnUnits)
  @return $columnUnits / $totalColumns

@function gutterAdjustment($columnUnits, $gutterWidth)
  @return $gutterWidth - ($gutterWidth * columnRatio($columnUnits))

@function columnWidth($columnUnits, $gutterWidth)
  @return unquote("#{percentage(columnRatio($columnUnits))} - #{gutterAdjustment($columnUnits, $gutterWidth)}")

=column($columnUnits, $gutterWidth)
  float: left
  display: block
  width: calc(#{columnWidth($columnUnits, $gutterWidth)})
  margin-right: $gutterWidth
  &:last-child
    margin-right: 0

=shiftColumns($columnUnits, $gutterWidth)
  margin-left: calc(#{percentage(columnRatio($columnUnits))} + #{$gutterWidth - gutterAdjustment($columnUnits, $gutterWidth)})

=columnGrid($gutterWidth)
  +clearfix

  @for $i from 1 through ($totalColumns - 1)

    .col-#{$i}
      +column($i, $gutterWidth)

    .shift-#{$i}
      +shiftColumns($i, $gutterWidth)

  &.outer-gutters
    margin-left: $gutterWidth
    margin-right: $gutterWidth


// =========================================================
// grids with different width gutters (32px is default)
// =========================================================

.grid
  +columnGrid(32px)

.grid-8
  +columnGrid(8px)

.grid-16
  +columnGrid(16px)

.grid-48
  +columnGrid(48px)

.grid-64
  +columnGrid(64px)

// =========================================================
// Responsive Columns
//
// They simply become full-width on mobile or tablet screens.
// =========================================================

+mobile
  .stack-on-mobile
    width: 100%
    margin-left: 0
  .stack-on-mobile + .stack-on-mobile
    margin-top: 32px

+tablet
  .stack-on-tablet
    width: 100%
    margin-left: 0
  .stack-on-tablet + .stack-on-tablet
    margin-top: 32px

// =========================================================
// Tables
//
// Grid-aligned table cells 1-12 units wide. no gutters.
// =========================================================

table.grid
  @for $i from 1 through ($totalColumns - 1)
    .col-#{$i}
      float: none
      display: table-cell
      margin: 0
      width: columnRatio($i) * 100%
